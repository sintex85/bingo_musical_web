### Activa motor de reescritura
RewriteEngine On

### --- WebSocket /socket.io  --------------------------------
# Solo para peticiones que llevan Upgrade: websocket
RewriteCond %{REQUEST_URI}  ^/socket\.io/ [NC]
RewriteCond %{HTTP:Upgrade} =websocket   [NC]
RewriteRule /(.*)           ws://127.0.0.1:3000/$1 [P,L]

### --- Long-polling /socket.io  ------------------------------
RewriteCond %{REQUEST_URI}  ^/socket\.io/ [NC]
RewriteRule /(.*)           http://127.0.0.1:3000/$1 [P,L]

### --- Todo lo dem√°s  ---------------------------------------
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$          http://127.0.0.1:3000/$1 [P,L]